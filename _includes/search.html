{% if site.post_search %}

<div id="blog-search-overlay">

  <div id="nav-search-exit" title="Exit search">âœ•</div>
  <input type="text" id="nav-search-input" placeholder="Search">
  <ul id="search-results-container"></ul>
  
  <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var sjs = SimpleJekyllSearch({
        searchInput: document.getElementById('nav-search-input'),
        resultsContainer: document.getElementById('search-results-container'),
        json: '{{ site.baseurl }}/assets/data/searchcorpus.json',
        searchResultTemplate: '<li><a href="{url}">{title}</a><p class="search-result-date">{date}</p></li>',
        noResultsText: 'No results found',
        limit: 10,
        fuzzy: false
      });
      
      // Make sure the nav search link works independently of blog.js
      if (!window.searchInitialized) {
        document.getElementById('nav-search-link').addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('blog-search-overlay').style.display = 'block';
          document.getElementById('nav-search-input').focus();
          document.body.classList.add('overflow-hidden');
        });
        
        document.getElementById('nav-search-exit').addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('blog-search-overlay').style.display = 'none';
          document.body.classList.remove('overflow-hidden');
        });
        
        window.searchInitialized = true;
      }
    });
  </script>
</div>

{% endif %}
